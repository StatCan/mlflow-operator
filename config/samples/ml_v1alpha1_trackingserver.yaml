apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: mlflow
  annotations:
    kubernetes.io/ingress.class: istio
spec:
  rules:
  - host: mlflow.example.ca
    http:
      paths:
      - backend:
          serviceName: mlflow
          servicePort: 5000
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: mlflow
  labels:
    app.kubernetes.io/name: mlflow
spec:
  host: "*.mlflow.svc.cluster.local"
  trafficPolicy:
    tls:
      mode: "DISABLE"
---
apiVersion: ml.mlflow.org/v1alpha1
kind: TrackingServer
metadata:
  name: trackingserver-sample
spec:
  # Add fields here
  size: 2
  image: "k8scc01covidacr.azurecri.io/mlflow:5655f604b1e0320f6d21bffc22beebeb1eae7d5d"
  # imagePullSecret: "8scc01covidacr-registry-connection"
  # s3secretName: "test"
  # s3endpointURL: "localhost:5000"
